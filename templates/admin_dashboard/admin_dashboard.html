<!DOCTYPE html>
{%load static%}
{%load crispy_forms_tags %}
{%load widget_tweaks%}
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link rel="stylesheet" href="{%static 'css/bootstrap.css'%}"/>
    <link rel="stylesheet" href="{%static 'css/bootstrap.min.css'%}"/>
    <link rel="stylesheet" href="{%static 'css/global.css'%}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
      .shado{
        box-shadow: 0 8px 6px rgb(76, 162, 76);
      }
      .shado1{
        box-shadow: 0 8px 6px rgb(146, 224, 146);
      }
      .shado2{
        box-shadow: 0 8px 6px rgb(56, 143, 86);
      }
      .shado3{
        box-shadow: 0 8px 6px rgb(224, 88, 80);
      }
      .shado4{
        box-shadow: 0 8px 6px rgb(166, 164, 164);
      }
      .add-crop{
        text-decoration: none;
      }
      .add-crop:hover{
        transform: translate(2px,2px);
        box-shadow: 0 8px 6px rgb(166, 164, 164);
      }
      /*Musha holistic item style*/
      .rice-circle {
        height: 6.2px;
        width: 6.8px;
        border-radius: 50%;
        background-color: #2cb67d;
      }
      .wheat-circle{
        height: 6.2px;
        width: 6.8px;
        border-radius: 50%;
        background-color: #c98e30;
      }

      a{
        text-decoration: none;
      }

      /*Table style*/
      .table_pred,.table_pred th, .table_pred td {
        border: 1px solid rgb(207, 207, 207);
        border-collapse: collapse;
      }

     /* Image upload icon*/
     #div_id_photo{
        height: 100px;
        border: 2px dashed #ccc;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
     }
     #div_id_photo .input-group{
      visibility: hidden;
     }
     #id_photo{
      margin-top: -50px;
     }
     .image-upload {
        border: 2px dashed #ccc;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
      }

      .image-upload label {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 150px;
      }

      .image-upload img {
        max-width: 100%;
        height: auto;
      }

      /* Regulatory update fields*/
      #div_id_title label, #div_id_description label{
        font-size: 20px;
        font-weight: bold;
      }
      #div_id_title input, #div_id_description textarea {
        background-color: rgb(136, 225, 228);
      }
    </style>
  </head>
  <body style="font-family: Arial, Helvetica, sans-serif;">
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="home" viewBox="0 0 16 16">
        <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
      </symbol>
      <symbol id="speedometer2" viewBox="0 0 16 16">
        <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
        <path fill-rule="evenodd" d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z"/>
      </symbol>
      <symbol id="table" viewBox="0 0 16 16">
        <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
      </symbol>
      <symbol id="people-circle" viewBox="0 0 16 16">
        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
      </symbol>
      <symbol id="grid" viewBox="0 0 16 16">
        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
      </symbol>
   </svg>

  <div class="container-fluid">
      <!-- Main container -->
      <div class="row g-4">
        <!-- First column ============== VERTICAL NAVBAR-->
        <div class="col-md-3 h-100 sticky-lg-top d-flex flex-column flex-shrink-0 p-4 bg-light mt-1 shado2 shado4" style="font-size:28px; border-right: 1px groove rgb(142, 140, 140);">
          <a href="{%url 'admin_profile'%}" class="d-flex align-items-center mb-4 mb-md-0 me-md-auto link-dark text-decoration-none">
            {%if user_profile.photo%}
              <img src="{{user_profile.photo.url}}" alt="" width="50" height="50" class="rounded-circle me-2">
            {%else%}
              <img src="{%static 'img/public/11@2x.png'%}" alt="" width="32" height="32" class="rounded-circle me-2">
            {%endif%}
            <span class="fs-4">{{user.first_name}} {{user.last_name}}</span>
          </a>

        <ul class="nav flex-column mb-auto mt-4">
          <li>
            <a href="{%url 'admin_dash'%}" 
            class="nav-link link-dark shado2 mt-2 
            {%if request.resolver_match.url_name == 'admin_dash' or request.resolver_match.url_name == 'dashboard'%}
              bg-success text-light
            {%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#speedometer2"/></svg>
              Dashboard
            </a>
          </li>
          <li>
            <a href="{%url 'admin_products'%}" 
            class="nav-link link-dark shado2 mt-2 
            {%if request.resolver_match.url_name == 'admin_products' or request.resolver_match.url_name == 'crop_details'%}
              bg-success text-light crop_details
            {%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#table"/></svg>
              Products
            </a>
          </li>
          <li>
            <a href="{%url 'crop_pred'%}" 
              class="nav-link link-dark shado2 mt-2 
                {%if request.resolver_match.url_name == 'crop_pred' or request.resolver_match.url_name == 'predict_crop_results' or request.resolver_match.url_name == 'fert_pred' or request.resolver_match.url_name == 'predict_fertilizer' %} 
                 bg-success text-light
                {%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
              Predictions
            </a>
          </li>
           <li>
            <a href="{%url 'sustain_management'%}" 
            class="nav-link link-dark shado2 mt-2 
            {%if request.resolver_match.url_name == 'sustain_management' or request.resolver_match.url_name == 'update_sustain' %} 
              bg-success text-light
            {%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
              Substainability Management
            </a>
          </li>
          
           <li>
            <a href="{%url 'regulatory_comp'%}" 
            class="nav-link link-dark shado2 mt-2 
            {%if request.resolver_match.url_name == 'regulatory_comp' or request.resolver_match.url_name == 'regulatory_update'%}
             bg-success text-light
            {%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
              Regulatory Compliance
            </a>
          </li>
          <li>
            <a href="{%url 'estimated_yield_reporter'%}" 
            class="nav-link link-dark shado2 mt-2 
            {%if request.resolver_match.url_name == 'estimated_yield_reporter'%}
             bg-success text-light
            {%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
              Farmers Yield Report
            </a>
          </li>
          <li>
            <a href="{%url 'admin_profile'%}" 
            class="nav-link link-dark shado2 mt-2 {%if request.resolver_match.url_name == 'admin_profile'%} bg-success text-light{%endif%}">
              <svg class="bi me-2" width="16" height="16"><use xlink:href="#people-circle"/></svg>
              Admin Profile
            </a>
          </li>
        </ul>
        <a href="{%url 'logout'%}" class="text-danger shado3" style="text-decoration: none; color:black; margin-top:100%;">
          <img  class="usign-out-alt-icon" loading="lazy" alt=""src="{%static 'img/public/usignoutalt.svg' %}"/> 
          Logout
        </a>  
     </div>
     <!-- ================ END VERTICAL NAVBAR ======= -->

     <!-- Second column -->
      <!--  =================================    DASHBOARD PAGE    ======== -->
       {%if page == 'admin_dash'%}
      <div class="col-md-9">
        <div class="container mt-2">
          <!-- Top title -->
          <div class="d-flex justify-content-between p-2 mb-4 shado">
              <h1 class="text-success">REAL TIME ANALYTICS</h1>
              <h3>AgriPLM</h3>
            </div>
            <!-- Welcome messages -->
            <div class="row">
              <div class="col-md-6"></div>
              <div class="col-md-2"> </div>
              <div class="col-md-4">{%include 'messages/messages.html'%}</div>
            </div>
            <!-- Dashboard design -->
            <div class="container-fluid mt-4">
              <div class="row">
                <!-- First part -->
                <div class="col-md-8 shado1 px-4 pb-4">
                  <div class="row shado4 p-3 text-center" style="border-radius: 25px; border:1px groove black;">
                      <div class="col-md-3 row" style="border-right: 1px groove black;">
                            <div class="col">
                              <img src="{%static 'img/public/crop.png'%}" alt="">
                            </div>
                            <div class="col">
                              <div class="col-12 text-secondary">Total Estimated Yield</div>
                              <div class="col-12"><h6><b>{{total_yields}} Tons</b></h6></div>
                            </div>
                      </div>
                      <div class="col-md-3 row" style="border-right: 1px groove black;">
                            <div class="col px-3">
                              <img src="{%static 'img/public/group-10-11.svg'%}" alt="">
                            </div>
                            <div class="col">
                              <div class="col-12 text-secondary">Number of Farmers</div>
                              <div class="col-12"><h6><b>{{number_of_farmers}}</b></h6></div>
                            </div>
                      </div>
                      <div class="col-md-3 row" style="border-right: 1px groove black;">
                          <div class="col px-3">
                            <img src="{%static 'img/public/group-10-21.svg'%}" alt="">
                          </div>
                          <div class="col">
                            <div class="col-12 text-success">Active Projects</div>
                            <div class="col-12"><h6><b>{{active_projects}}</b></h6></div>
                          </div>
                      </div>
                      <div class="col-md-3 row">
                          <div class="col px-3">
                            <img src="{%static 'img/public/group-10-21.svg'%}" alt="">
                          </div>
                          <div class="col">
                            <div class="col-12 text-danger">Closed Projects</div>
                            <div class="col-12"><h6><b>{{closed_projetcs}}</b></h6></div>
                          </div>
                      </div>
                  </div>

                  <!-- CROP PRODUCTION -->
                   <div class="row mt-4 mb-0">
                    <h4>CROP PRODUCTION</h4>
                    <img src="{%static 'img/crop_prod.png'%}" alt="">
                   </div>

                   <!-- MHH AGRICULTURAL PRODUCT LIFE-CYCLE -->
                    <div class="row mt-4">
                      <h4>MHH AGRICULTURAL PRODUCT LIFE-CYCLE</h4>
                      <img src="{%static 'img/hmm.png'%}" alt="">
                    </div>

                </div>
                <!-- Second pard -->
                <div class="col-md-4 shado1">
                  <h4 class="p-2 shado4 mb-2">Our Proucts</h4>

                  <div class="row d-flex justify-content-between mt-3">
                    <div class="col-md-2"></div>
                    <div class="col-md-8" style="position: relative;">
                    <img class="w-100" src="{%static 'img/rounded_circle.png'%}" alt="">
                    <div style="position: absolute; bottom:25%; left:30%;">
                      <h5>Total Estimated </h5>
                      <h5> Yield</h5>
                      <h5> <b>{{total_yields}}Tons</b></h5>
                    </div>
                    </div>
                    <div class="col-md-2"></div>
                  </div>
                  <!--  Musha Holistic Harvest-->
                  <div class="row px-3 mt-4">
                    <h6 style="color: #aeaeae;">Mushaâ€™s Holistic Harvest</h6>
                    {%for query in aggre_query%}
                    <div class="col-md-12 mt-3">
                       <div class="row w-100 d-flex justify-content-between">
                      <div class="col d-flex align-items-center">
                        <div class="rice-circle"></div>
                        <div class="px-1">{{query.crop_fert_pred__predicted_crop}}</div>
                      </div>
                      <div class="col">{{query.sum}} Tons<br> <i style="color: #8f8c8c;">{{query.percentage}}%</i></div>
                    </div>
                    </div> 
                    {%endfor%}  
                  </div>
                </div>
              </div>
            </div>
        </div>
        </div>

      <!--  ===================================== PRODUCTS =================-->
       {%elif page == 'admin_products'%}
       <div class="col-md-9">
          <div class="container mt-3">
              <div class="d-flex justify-content-between mb-5 shado">
              <h1 class="text-success px-2">OUR AGRICULTURAL PRODUCTS</h1>
              <h3>AgriPLM</h3>
            </div>
            <div class="row">
              <div class="col-md-4"></div>
              <div class="col-md-4"></div>
              <div class="col-md-4">
                {%include 'messages/messages.html'%}
              </div>
            </div>
            <div class="row">
              <!-- Crop Card -->
               {%if crops%}
               {%for crop in crops%}
              <div class="col-lg-3 col-md-6 mt-3">
                 <a href="{%url 'crop_details' crop.id%}" class="card p-3 text-center mt-2  shado4" style="border: none; border-radius:20px; height:100%;">
                  <img src="{{crop.crop_image.url}}" class="card-img-top h-100" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">{{crop.crop_name}}</h5>
                    <p class="card-text">{{crop.description}}</p>
                  </div>
                </a>
              </div>
              {%endfor%}
              {%else%}
              <h1>No available products</h1>
              {%endif%}
            </div>
            <!-- Add crop button -->
            <div class="mt-5 shado d-flex justify-content-between align-items-center" style="background-color: rgb(61, 182, 141); padding:10px; border-radius:10px; width:30%;">
              <img  alt="" src="{%static 'img/public/crop.png'%}" />
              <h3 class="text-white">Add Crop</h3> 
                <!-- Button trigger modal -->
              <a href="#" class="add-crop" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <img  alt="" src="{%static 'img/public/add_crop.png'%}" />
              </a>
                 <!-- Modal -->
              <div class="modal fade modal-xl" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content shado4">
                    <form action="" method="POST" enctype="multipart/form-data">
                      {%csrf_token%}
                    <div class="modal-header">
                      <h5 class="modal-title text-success" id="exampleModalLabel"><b>NEW CROP</b></h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body shado4">
                      <div class="row shado4">
                        <!-- Upload Crop image column -->
                        <div class="col-md-2 mt-4">
                              <div class="image-upload shado3">
                                <label for="file-input">
                                  <i class="fa-solid fa-cloud-arrow-up"></i> <span>Drag & Drop <br>or</span>
                                </label>
                                <input class="w-100" type="file" name="crop_image" id="file-input" accept="image/*" required>
                                <img id="image-preview" src="" alt="">
                              </div>
                        </div>
                        <div class="col-md-1"></div>
                        <!-- Other input fields -->
                        <div class="col-md-9 row mb-2">
                          <!-- Crop name -->
                          <div class="col-md-4 mt-4 shado4">
                            <label for="cropName" class="form-label"><b>CROP NAME</b></label>
                            <input type="text" class="form-control" id="cropName" name="crop_name" placeholder="Enter Crop Name" required>
                          </div>
                          <!-- crop description -->
                          <div class="col-md-4 mt-4 shado4">
                            <label for="description" class="form-label"><b>DESCRIPTION</b></label>
                            <textarea class="form-control" name="description" id="description" rows="3" placeholder="Enter Description" required></textarea>
                          </div>
                          <!-- crop planting time -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="plant_time" class="form-label"><b>PLANTING TIME</b></label>
                            <textarea class="form-control" name="planting_time" id="planting_time" rows="3" placeholder="Enter Planting Time" required></textarea>
                          </div>
                          <!-- Fertilizers/pesticide -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="fertilizer" class="form-label"><b>FERTILIZER/ PESTICIDE</b></label>
                            <textarea class="form-control" name="fertilizer" id="fertilizer" rows="3" placeholder="Enter Fertilizer / Pesticide" required></textarea>
                          </div>
                          <!-- Irigation -->
                            <div class="col-md-4 mt-4 shado4">
                            <label for="irrigation" class="form-label"><b>IRRIGATION</b></label>
                            <textarea class="form-control" name="irrigation" id="irrigation" rows="3" placeholder="Enter Irrigation" required></textarea>
                          </div>
                          <!-- Harvest -->
                            <div class="col-md-4 mt-4 shado4">
                            <label for="harvest" class="form-label"><b>HARVEST</b></label>
                            <textarea class="form-control" name="harvest" id="harvest" rows="3" placeholder="Enter Harvest" required></textarea>
                          </div>
                          <!-- Cleaning /sorting -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="cleanSort" class="form-label"><b>CLEANING/ SORTING</b></label>
                            <textarea class="form-control" name="cleaning" id="cleanSort" rows="3" placeholder="Enter Cleaning/ Sorting" required></textarea>
                          </div>
                          <!-- Storage -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="storage" class="form-label"><b>STORAGE</b></label>
                            <textarea class="form-control" name="storage" id="storage" rows="3" placeholder="Enter Storage" required></textarea>
                          </div>
                          <!-- Transportation -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="transport" class="form-label"><b>TRANSPORTATION</b></label>
                            <textarea class="form-control" name="transportation" id="transport" rows="3" placeholder="Enter Transportation" required></textarea>
                          </div>
                          <!-- Consumption -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="consumption" class="form-label"><b>CONSUMPTION</b></label>
                            <textarea class="form-control" name="consumption" id="consumption" rows="3" placeholder="Enter Consumption" required></textarea>
                          </div>
                          <!-- End of life consideration -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="endLife" class="form-label"><b>END OF LIFE CONSIDERATION</b></label>
                            <textarea class="form-control" name="end_of_life" id="endLife" rows="3" placeholder="Enter End of Life Consideration" required></textarea>
                        </div>
                      </div>
                    </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-success">ADD CROP</button>
                    </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
       </div>
       </div>

       <!-- ========================================== PRODUCT DETAILS | PRODUCT LIFE-CYCLE MANAGEMENT-->
        {%elif page == 'product_details'%}
       <div class="col-md-9">
          <div class="container mt-3">
              <div class="d-flex justify-content-between mb-5 shado">
              <h1 class="text-success px-2">PRODUCT LIFE-CYCLE MANAGEMENT</h1>
              <h3>AgriPLM</h3>
            </div>
            <div class="row">
              <div class="col-md-4"></div>
              <div class="col-md-4"></div>
              <div class="col-md-4">
                {%include 'messages/messages.html'%}
              </div>
            </div>
            <div class="row col-12 shado4" style="border-radius: 15px;">
              <div class="col-md-2">
                <!-- Crop image -->
                <img src="{{crop.crop_image.url}}" class="card-img-top" alt="..." style="height: 100px; width:150px">
              </div>
              <!-- crop name and its details -->
              <div class="col-md-9 py-2">
                <h2>{{crop.crop_name}}</h2>
                <p>{{crop.description}}</p>
                <div class="mt-5">
                  <!-- update button -->
                  <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#productDetails">Update</button>
                  <!-- delete button -->
                  <a href="{%url 'delete_crop' crop.id %}" onclick="return confirm('Are you sure you want to delete this crop?')" class="btn btn-danger">Delete</a>
                </div>
              </div>
            </div>
             <!-- Update crop Modal -->
              <div class="modal fade modal-xl" id="productDetails" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content shado4">
                    <form action="" method="POST" enctype="multipart/form-data">
                      {%csrf_token%}
                    <div class="modal-header">
                      <h5 class="modal-title text-success" id="exampleModalLabel"><b>UPDATE CROP DETAILS</b></h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body shado4">
                      <div class="row shado4">
                        <!-- Upload Crop image column -->
                        <div class="col-md-2 mt-4">
                              <div class="image-upload shado3" style="overflow-x:hidden;">
                                <label for="file-input">
                                  <i class="fa-solid fa-cloud-arrow-up"></i> <span>Drag & Drop <br>or</span>
                                </label>
                                {%render_field crop_form.crop_image id+="file-input"%}
                                <img id="image-preview" src="" alt="">
                              </div>
                        </div>
                        <div class="col-md-1"></div>
                        <!-- Other input fields -->
                        <div class="col-md-9 row mb-2">
                          <!-- Crop name -->
                          <div class="col-md-4 mt-4 shado4">
                            <label for="cropName" class="form-label"><b>CROP NAME</b></label>
                            <!-- <input type="text" class="form-control" id="cropName" name="crop_name" placeholder="Enter Crop Name" required> -->
                            {%render_field crop_form.crop_name class+="form-control bg-info"%}
                          </div>
                          <!-- crop description -->
                          <div class="col-md-4 mt-4 shado4">
                            <label for="description" class="form-label"><b>DESCRIPTION</b></label>
                            {%render_field crop_form.description class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- crop planting time -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="plant_time" class="form-label"><b>PLANTING TIME</b></label>
                            {%render_field crop_form.planting_time class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- Fertilizers/pesticide -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="fertilizer" class="form-label"><b>FERTILIZER/ PESTICIDE</b></label>
                            {%render_field crop_form.fertilizer class+="form-control bg-info" rows="3"%}
                           </div>
                          <!-- Irigation -->
                            <div class="col-md-4 mt-4 shado4">
                            <label for="irrigation" class="form-label"><b>IRRIGATION</b></label>
                            {%render_field crop_form.irrigation class+="form-control bg-info" rows="3"%}
                            </div>
                          <!-- Harvest -->
                            <div class="col-md-4 mt-4 shado4">
                            <label for="harvest" class="form-label"><b>HARVEST</b></label>
                            {%render_field crop_form.harvest class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- Cleaning /sorting -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="cleanSort" class="form-label"><b>CLEANING/ SORTING</b></label>
                            {%render_field crop_form.cleaning class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- Storage -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="storage" class="form-label"><b>STORAGE</b></label>
                            {%render_field crop_form.storage class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- Transportation -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="transport" class="form-label"><b>TRANSPORTATION</b></label>
                            {%render_field crop_form.transportation class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- Consumption -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="consumption" class="form-label"><b>CONSUMPTION</b></label>
                            {%render_field crop_form.consumption class+="form-control bg-info" rows="3"%}
                          </div>
                          <!-- End of life consideration -->
                           <div class="col-md-4 mt-4 shado4">
                            <label for="endLife" class="form-label"><b>END OF LIFE CONSIDERATION</b></label>
                            {%render_field crop_form.end_of_life class+="form-control bg-info" rows="3"%}
                        </div>
                      </div>
                    </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-success">UPDATE CROP</button>
                    </div>
                    </form>
                  </div>
                </div>
              </div>
              <!-- Modal end -->
              
              <!-- Product Lifecycle management -->
               <div class="d-flex flex-row mt-4 row">
                <!-- Planting time and fertilizer -->
                  <div class="card border-success mb-3" style="max-width: 18rem;">
                    <div class="card-header"></div>
                    <div class="card-body text-success">
                      <!-- planting -->
                     <div class="card border-success mb-3" style="max-width: 18rem;">
                        <div class="card-header">1. Planting</div>
                        <div class="card-body text-success">
                          <p class="card-text">{{crop.planting_time}}</p>
                        </div>
                     </div>
                     <!-- Fertilizer -->
                     <div class="card border-success mb-3" style="max-width: 18rem;">
                      <div class="card-header">2. Fertilizer/ Pesticide</div>
                      <div class="card-body text-success">
                        <p class="card-text">{{crop.fertilizer}}</p>
                      </div>
                     </div>
                    </div>
                  </div>
                  <!-- Irrigation -->
                  <div class="card border-success mb-3 col-md-6" style="max-width: 18rem;">
                    <div class="card-header">3. Irrigation</div>
                    <div class="card-body text-success">
                      <p class="card-text">{{crop.irrigation}}</p>
                    </div>
                  </div>
                  <!-- Harvest -->
                  <div class="card border-success mb-3" style="max-width: 18rem;">
                    <div class="card-header">4. Harvest</div>
                    <div class="card-body text-success">
                      <p class="card-text">{{crop.harvest}}</p>
                    </div>
                  </div>
                  <!-- Cleaning / Sorting -->
                  <div class="card border-success mb-3" style="max-width: 18rem;">
                    <div class="card-header">5. Cleaning/ Sorting</div>
                    <div class="card-body text-success">
                      <p class="card-text">{{crop.cleaning}}</p>
                    </div>
                  </div>
                  <!-- Storage -->
                  <div class="card border-success mb-3" style="max-width: 18rem;">
                    <div class="card-header">6. Storage</div>
                    <div class="card-body text-success">
                      <p class="card-text">{{crop.storage}}</p>
                    </div>
                  </div>
                  <!-- Transportation -->
                  <div class="card border-success mb-3" style="max-width: 18rem;">
                    <div class="card-header">7. Transportation/Distribution</div>
                    <div class="card-body text-success">
                      <p class="card-text">{{crop.transportation}}</p>
                    </div>
                  </div>
                  <!-- Consumption and End ol life -->
                  <div class="card border-success mb-3" style="max-width: 18rem;">
                    <div class="card-header"></div>
                    <div class="card-body text-success">
                      <!-- Consumption -->
                     <div class="card border-success mb-3" style="max-width: 18rem;">
                        <div class="card-header">8. Consumption</div>
                        <div class="card-body text-success">
                          <p class="card-text">{{crop.consumption}}</p>
                        </div>
                     </div>
                     <!-- End of life concideration -->
                     <div class="card border-success mb-3" style="max-width: 18rem;">
                      <div class="card-header">9. End-Of-Life Consideration</div>
                      <div class="card-body text-success">
                        <p class="card-text">{{crop.end_of_life}}</p>
                      </div>
                     </div>
                    </div>
                  </div>
                </div>
              </div>
       </div>
       </div>

       <!--  ================================= CROP AND FERTILIZER PREDICTIONS =============== -->
        {%elif page == 'crop_fertilizer_predict'%}
        <div class="col-md-9">
          <div class="container-fluid mt-3">
            <div class="bg-light" style="position: sticky; top:0; z-index:1;">
              <div class="d-flex justify-content-between mb-5 shado">
                <h1 class="text-success px-2">CROP AND FERTILIZER PREDICTION</h1>
                <h3>AgriPLM</h3>
              </div>
              <div class="row px-3">
                <a href="{%url 'crop_pred'%}" class="col-md-6 shado text-center
                {%if request.resolver_match.url_name == 'crop_pred' or  request.resolver_match.url_name == 'predict_crop_results'%} 
                  bg-success text-light
                {%endif%}"
                style="border-radius: 10px; padding:5px;">
                  <h2>CROP PREDICTIONS</h2>
                </a>
                <a href="{%url 'fert_pred'%}" class="col-md-6 shado text-center
                {%if request.resolver_match.url_name == 'fert_pred' or request.resolver_match.url_name == 'predict_fertilizer' %}
                  bg-success text-light
                {%endif%}"
                style="border-radius: 10px; padding:5px;">
                  <h2>FERTILIZER PREDICTIONS</h2>
                </a>
              </div>
            </div>   
            <!-- message -->
            <div class="row">
              <div class="col-md-4"></div>
              <div class="col-md-4"></div>
              <div class="col-md-4">
              {%include 'messages/messages.html'%}
              </div>
              <!-- CROP PREDICTION PART -->
               {%if part == 'crop_prediction_part'%}
              <div class="col-md-12">
                <div class="shado" style="padding: 5px;">
                  <div class="mt-2">
                    <button class="btn btn-lg btn-success mt-2" data-bs-toggle="modal" data-bs-target="#cropPredict">
                      PREDICT CROP
                    <img  alt="" src="{%static 'img/public/add_crop.png'%}" />
                    </button>
                  </div>
                <h2 class="mt-4 text-center">CROP PREDICTED RESULTS</h2>
                <table class="table table_pred h-100">
                  <thead class="table-dark">
                    <th>ID</th>
                    <th>Cell</th>
                    <th>Date of Prediction</th>
                    <th>Nitrogen</th>
                    <th>Phosphorus</th>
                    <th>Potassium</th>
                    <th>PH</th>
                    <th>Rainfall</th>
                    <th>Temperature</th>
                    <th class="bg-success">Predicted Crop</th>
                  </thead>
                  <tbody>
                    {%for crop_pred in cropFertilizerModel%}
                    <tr>
                      <td>{{crop_pred.id}}</td>
                      <td>{{crop_pred.cell}}</td>
                      <td>{{crop_pred.date}}</td>
                      <td>{{crop_pred.nitrogen}}</td>
                      <td>{{crop_pred.phosphorus}}</td>
                      <td>{{crop_pred.potassium}}</td>
                      <td>{{crop_pred.ph}}</td>
                      <td>{{crop_pred.rainfall}}</td>
                      <td>{{crop_pred.temperature}}</td>
                      <td class="bg-info text-center">{{crop_pred.predicted_crop}}</td>
                    </tr>
                    {%endfor%}
                  </tbody>
                </table>
                <!-- Crop prediction model form -->
                  <div class="modal fade" id="cropPredict" tabindex="-1" aria-labelledby="cropPredict" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="cropPredict"><b>ENTER SOIL MEASUREMENTS TO PREDICT THE CROP TO BE GROWN</b></h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{%url 'predict_crop_results'%}" method="POST">
                          {%csrf_token%}
                        <div class="modal-body">
                          <!-- Inputs fields -->
                          <div class="shado p-1 mb-3">
                            {{cropPredictForm |crispy}}
                          </div>
                        </div>
                        <div class="modal-footer justify-content-center">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                          <button type="submit" class="btn btn-success">PREDICT</button>
                        </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>    
              </div>
              <!-- Predict single crop results-->
              {%elif part_page == 'crop_result_page'%}
              <div class="col-md-12 row mt-5">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                  <h4 class="text-light text-center bg-success p-2">CROP PREDICTION RESULTS</h4>
                  <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Cell
                      <span class="badge bg-primary rounded-pill">{{crop_result.cell}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Date of Crop Prediction
                      <span class="badge bg-primary rounded-pill">{{crop_result.date}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Nitrogen
                      <span class="badge bg-primary rounded-pill">{{crop_result.nitrogen}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Phosphorus
                      <span class="badge bg-primary rounded-pill">{{crop_result.phosphorus}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Potassium
                      <span class="badge bg-primary rounded-pill">{{crop_result.potassium}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      PH
                      <span class="badge bg-primary rounded-pill">{{crop_result.ph}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Rainfall
                      <span class="badge bg-primary rounded-pill">{{crop_result.rainfall}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Temperature
                      <span class="badge bg-primary rounded-pill">{{crop_result.temperature}}</span>
                    </li>
                  </ul>
                  <div class="mt-4 text-center">
                    <h6>THE RECOMMENDED CROP IS:</h6>
                    <h2>
                      <i class="bg-danger text-light text-center p-2 mt-4">{{crop_result.predicted_crop}}</i>
                    </h2>
                  </div>
                  
                </div>
                <div class="col-md-4"></div>
              </div> 

              
              {%elif part == 'fertilizer_prediction_part'%}
              <!-- FERTILIZER PREDICTION PART-->
              <div class="col-md-12 mt-5">
                <div class="shado3" style="padding: 5px;">
                <h2 class="mt-4 text-center">FERTILIZER PREDICTED RESULTS</h2>
                <table class="table table_pred">
                  <thead class="table-danger">
                    <th>ID</th>
                    <th>Cell</th>
                    <th>Date of Crop Prediction</th>
                    <th>Nitrogen</th>
                    <th>Phosphorus</th>
                    <th>Potassium</th>
                    <th>PH</th>
                    <th>Rainfall</th>
                    <th>Temperature</th>
                    <th>Crop</th>
                    <th class="bg-success text-light">Predicted Fertilizer</th>
                  </thead>
                  <tbody>
                    {%for crop in cropFertilizerModel%}
                    <tr>
                      <td>{{crop.id}}</td>
                      <td>{{crop.cell}}</td>
                      <td>{{crop.date}}</td>
                      <td>{{crop.nitrogen}}</td>
                      <td>{{crop.phosphorus}}</td>
                      <td>{{crop.potassium}}</td>
                      <td>{{crop.ph}}</td>
                      <td>{{crop.rainfall}}</td>
                      <td>{{crop.temperature}}</td>
                      <td>{{crop.predicted_crop}}</td>
                      {%if crop.predicted_fertilizer != None%}
                      <td class="bg-secondary text-light text-center">{{crop.predicted_fertilizer}}</td>
                      {%else%}
                      <td>
                        <i>Not predicted <br></i>
                        <a href="{%url 'predict_fertilizer' crop.id%}" class="btn btn-danger">Predict it</a>
                      </td>
                      {%endif%}
                    </tr>
                    {%endfor%}
                  </tbody>
                </table>
                </div> 
              </div>
              <!-- Predict single fertilizer -->
              {%elif part_page == 'predict_fertilizer'%}
              <div class="col-md-12 row mt-5">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                  <h4 class="text-light text-center bg-success p-2">FERTILIZER PREDICTION RESULTS</h4>
                  <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      ID
                      <span class="badge bg-primary rounded-pill">{{crop.id}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Cell
                      <span class="badge bg-primary rounded-pill">{{crop.cell}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Date of Crop Prediction
                      <span class="badge bg-primary rounded-pill">{{crop.date}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Nitrogen
                      <span class="badge bg-primary rounded-pill">{{crop.nitrogen}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Phosphorus
                      <span class="badge bg-primary rounded-pill">{{crop.phosphorus}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Potassium
                      <span class="badge bg-primary rounded-pill">{{crop.potassium}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      PH
                      <span class="badge bg-primary rounded-pill">{{crop.ph}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Rainfall
                      <span class="badge bg-primary rounded-pill">{{crop.rainfall}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Temperature
                      <span class="badge bg-primary rounded-pill">{{crop.temperature}}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Crop
                      <span class="badge bg-primary rounded-pill">{{crop.predicted_crop}}</span>
                    </li>
                  </ul>
                  <div class="mt-4 text-center">
                    <h6>THE RECOMMENDED FERTILIZER IS:</h6>
                    <h2>
                      <i class="bg-danger text-light text-center p-2 mt-4">{{crop.predicted_fertilizer}}</i>
                    </h2>
                  </div>
                  
                </div>
                <div class="col-md-4"></div>
              </div>         
              {%endif%}
            </div>
          </div>
        </div>

        

       <!--  ================================SUSTAINABILITY MANAGEMENT ====================== -->
         {%elif page == 'sustain_management'%}
         <div class="col-md-9">
          <div class="container mt-3">
              <div class="d-flex justify-content-between mb-5 shado">
              <h1 class="text-success px-2">SUSTAINABILITY MANAGEMENT</h1>
              <h3>AgriPLM</h3>
            </div>
            <div class="row">
              <div class="col-md-4"></div>
              <div class="col-md-4"></div>
              <div class="col-md-4">
                {%include 'messages/messages.html'%}
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <h1><b>LIFECYCLE ASSESSMENT</b></h1>
                <img class="w-100" src="{%static 'img/life_cycle_ass.png'%}" alt="">
              </div>
              <div class="col-md-6">
              <h1><b>CARBON FOOTPRINT</b></h1>
              <img class="w-100" src="{%static 'img/carbon_footprint.png'%}" alt="">
            </div>
            </div>
            <!--d Current Sustainability practices -->
            <div class="row row-cols-1 mt-4">
                <h2 class="mb-4"><b>CURRENT SUSTAINABILITY PRACTICES</b></h2>
                <!-- col-row-1 -->
              {%for sus in sustain_management%}
              <a href="{%url 'update_sustain' sus.id%}" class="col mt-3">
                <div class="row">
                  <div class="col-md-2 text-secondary shado1">
                  <h4><b>{{sus.title}}</b></h4>
                  </div>
                  <div class="col-md-10 shado4" style="border-radius: 10px; color: black;">
                    <p style="font-size: 18px;">{{sus.description}}</p>
                  </div>
                </div> 
              </a>
              {%endfor%}
               <!-- Button trigger modal -->
            <button type="button" class="btn btn-success w-25 mt-4 mb-3" data-bs-toggle="modal" data-bs-target="#sustainableManagement">New Update</button>
            <!-- Modal -->
            <div class="modal fade modal-lg" id="sustainableManagement" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">NEW UPDATE SUSTAINABILITY MANAGEMENT</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <form action="{%url 'sustain_management'%}" method="POST">
                    {%csrf_token%}
                  <div class="modal-body">
                    {{sustain_management_form | crispy}}
                  </div>
                  <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-success">ADD NEW UPDATE</button>
                  </div>
                  </form>
                </div>
              </div>
            </div>
            </div>

         </div>
         </div>
         <!-- ===================================== UPDATE REGULATORY COMPLIANCE======================== -->
         {%elif page == 'sustain_manage_update'%}
         <div class="col-md-9">
          <div class="container mt-3">
            <div class="row mt-5">
              <div class="col-md-2"></div>
              <div class="col-md-8">
                <div class="d-flex justify-content-between mb-5 shado">
                <h2 class="text-success px-2">UPDATE SUSTAINABILITY MANAGEMENT</h2>
             </div>
                <form action="" method="POST" class="shado1 p-3">
                    {%csrf_token%}
                  <div>
                    {{sustain_management_form| crispy}}
                  </div>
                  <a href="{{request.META.HTTP_REFERER}}" class="btn btn-secondary" >GO BACK</a>
                  <button type="submit" class="btn btn-success">UPDATE</button>
                  <a href="{%url 'delete_sustain' sustain_manage.id %}" class="btn btn-danger">DELETE</a>
                  </form>
              </div>
              <div class="col-md-2">
                <h3>AgriPLM</h3>
              </div>
            </div>

         </div>
         </div>

        <!--  =========================================== REGULATORY COMPLIANCE======================== -->
         {%elif page == 'regulatory_comp'%}
         <div class="col-md-9">
          <div class="container mt-3">
              <div class="d-flex justify-content-between mb-5 shado">
              <h1 class="text-success px-2">REGULATORY COMPLIANCE TRACKING</h1>
              <h3>AgriPLM</h3>
            </div>
            <h1><b>List of Rwanda's current Regulatory Compliance</b></h1>
            <div class="row mt-5">
              <div class="col-md-9">
                {%if regulatory%}
                <table class="table">
                  <thead >
                    <tr >
                      <th scope="col" colspan="2" style="color: #ccc;">Regulatory Compliance</th>
                      <th scope="col" style="color: #ccc;">Update</th>
                      <th scope="col" style="color: #ccc;">Delete</th>
                    </tr>
                  </thead>
                  <tbody>
                    
                    {%for reg in regulatory%}
                    <tr>
                      <td colspan="2">{{reg.title}}</td>
                      <td><a href="{%url 'regulatory_update' reg.id%}" class="btn text-success" style="background-color: rgb(164, 225, 186); color:azure">Update</a></td>
                      <td><a href="{%url 'delete_reg' reg.id%}" onclick="return confirm('Are you sure you want to delete it?')" class="btn text-danger" style="background-color: rgb(218, 160, 160);">Delete</a></td>
                    </tr>
                    {%endfor%}
                  </tbody>
               </table>
                {%else%}
                <h2>No available regulatory compliance</h2>
                {%endif%}
            <div class="mt-5  w-50 d-flex justify-content-between">
              <!-- Button trigger modal -->
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">
              ADD
            </button>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">New Regulatory Compliance</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <form action="{%url 'regulatory_comp'%}" method="POST">
                    {%csrf_token%}
                  <div class="modal-body">
                    {{regulatory_comp_form | crispy}}
                  </div>
                  <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-success">ADD</button>
                  </div>
                  </form>
                </div>
              </div>
            </div>
            </div>
              </div>
              <!-- ==== READ MORE ========== -->
              <div class="col-md-3">
                {%include 'messages/messages.html'%}
                <button class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#readMore">READ MORE</button>
                <!-- Modal -->
                <div class="modal fade modal-xl" id="readMore" tabindex="-1" aria-labelledby="readMore" aria-hidden="true">
                  <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h1 class="modal-title shado" id="exampleModalLabel">DOCUMENTATION OF REGULATORY COMPLIANCE</h1>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body shado">
                          {%if regulatory%}
                          {%for regu in regulatory%}
                          <div class="shado1 p-3">
                            <h2>{{regu.title}}</h2>
                            <p>{{regu.description}}</p>
                          </div>
                          {%endfor%}
                          {%else%}
                          <h2>No available regulatory compliance</h2>
                          {%endif%}
                        </div>
                        <div class="modal-footer justify-content-center">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                      </div>
                    </div>
                 </div>
              </div>
            </div>

         </div>
         </div>

          <!-- ===================================== UPDATE REGULATORY COMPLIANCE======================== -->
         {%elif page == 'regulatory_comp_update'%}
         <div class="col-md-9">
          <div class="container mt-3">
            <div class="row mt-5">
              <div class="col-md-2"></div>
              <div class="col-md-8">
                <div class="d-flex justify-content-between mb-5 shado">
                <h2 class="text-success px-2">UPDATE REGULATORY COMPLIANCE TRACKING</h2>
             </div>
                <form action="" method="POST" class="shado1 p-3">
                    {%csrf_token%}
                  <div>
                    {{regulatory_comp_update_form| crispy}}
                  </div>
                  <a href="{{request.META.HTTP_REFERER}}" class="btn btn-secondary" >GO BACK</a>
                  <button type="submit" class="btn btn-success">UPDATE</button>
                  </form>
              </div>
              <div class="col-md-2">
                <h3>AgriPLM</h3>
              </div>
            </div>

         </div>
         </div>

         <!--  =========================================== FARMER'S ESTIMATED YIELD REPORT======================== -->
         {%elif page == 'yield_report'%}
         <div class="col-md-9">
          <div class="container mt-3">
              <div class="d-flex justify-content-between mb-5 shado sticky-lg-top bg-light">
              <h1 class="text-success px-2">FARMER'S ESTIMATED YIELD REPORT</h1>
              <h3>AgriPLM</h3>
            </div>
            {%if yield_data%}
            <i>{{number_of_projects}} Projects</i>
            <div class="w-100" style="overflow-x: scroll;">
               <table class="table table-hover mt-3 shado">
                  <thead>
                    <th class="bg-success text-light">Report_ID</th>
                    <th class="bg-success text-light">First Name</th>
                    <th class="bg-success text-light">Last Name</th>
                    <th class="bg-success text-light">Cell</th>
                    <th class="bg-success text-light">Nitrogen</th>
                    <th class="bg-success text-light">Phosphorus</th>
                    <th class="bg-success text-light">Potassium</th>
                    <th class="bg-success text-light">Ph</th>
                    <th class="bg-success text-light">Rainfall</th>
                    <th class="bg-success text-light">Temperature</th>
                    <th class="bg-success text-light">Crop</th>
                    <th class="bg-success text-light">Fertilizer</th>
                    <th class="bg-success text-light">Fertilizer Amount (Kgs)</th>
                    <th class="bg-success text-light">Date of Yield Pred</th>
                    <th class="bg-success text-light">Estimated Yield (Tons)</th>
                    <th class="bg-success text-light">Project Status</th>
                  </thead>
                  <tbody>
                    {%for data in yield_data%}
                    <tr>
                      <td>{{data.id}}</td>
                      <td>{{data.user.user.first_name}}</td>
                      <td>{{data.user.user.last_name}}</td>
                      <td>{{data.user.cell}}</td>
                      <td>{{data.crop_fert_pred.nitrogen}}</td>
                      <td>{{data.crop_fert_pred.phosphorus}}</td>
                      <td>{{data.crop_fert_pred.potassium}}</td>
                      <td>{{data.crop_fert_pred.ph}}</td>
                      <td>{{data.crop_fert_pred.rainfall}}</td>
                      <td>{{data.crop_fert_pred.temperature}}</td>
                      <td>{{data.crop_fert_pred.predicted_crop}}</td>
                      <td>{{data.crop_fert_pred.predicted_fertilizer}}</td>
                      <td>{{data.fertilizer_amount}}</td>
                      <td>{{data.yield_pred_date}}</td>
                      <td>{{data.predicted_yield}}</td>
                      {%if data.is_project_active%}
                      <td class="text-success">Active</td>
                      {%else%}
                      <td class="text-danger">Closed</td>
                      {%endif%}
                    </tr>
                    {%endfor%}
                  </tbody>
                </table> 
            </div>
            {%else%}
            <i>No available Projects</i>
            {%endif%}

                 
          </div>
         </div>


       <!--  ============================== USER PROFILE -->
        {%elif page == 'user_profile'%}
        <div class="col-md-9">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-11">
              <div class="d-flex justify-content-between mt-3 mb-5 p-1 shado">
              <h1 class="text-success">ADMIN PROFILE</h1>
              <h3>AgriPLM</h3>
            </div>
            </div>
          </div>
				<section class="row mt-3">
					<div class="col-md-1"></div>
					<div class="col-md-7"> 
            <div class="row mt-2">
              <div class="col"></div>
              <div class="col">{%include 'messages/messages.html'%}</div>
            </div>
            <div class="shado p-3">
              <a href="" class="d-flex align-items-center mb-4 mb-md-0 me-md-auto link-dark text-decoration-none">
                {%if user_profile.photo%}
                <img src="{{user_profile.photo.url}}" alt="" width="80" height="80" class="rounded-circle me-2">
                {%else%}
                <img src="{%static 'img/public/11@2x.png'%}" alt="" width="80" height="80" class="rounded-circle me-2">
                {%endif%}
                <span class="fs-4"><i style="color: gray;">{{user.email}}</i> <br> {{user.username}}</span>
            </a>
						<h3 class="py-2 mt-4 text-success">PERSONAL INFORMATION</h3>
            <hr class="text-success border-2">
              <form>
                <div class="row g-3">
                    <!-- First name -->
                  <div class="col-sm-6">
                    <label for="firstName" class="form-label">First name:</label>
                    <input type="text" class="form-control" value="{{user.first_name |upper}}" disabled/>
                  </div>
                  <!-- Last Name -->
                  <div class="col-sm-6">
                    <label for="lastName" class="form-label">Last name:</label>
                    <input type="text" class="form-control" value="{{user.last_name |capfirst}}" disabled/>
                  </div>
                  <!-- Title -->
                  <div class="col-12">
                    <label for="username" class="form-label">Title:</label>
                    <div class="input-group">
                      <input type="text" class="form-control" value="{{user_profile.title |capfirst}}" disabled/>
                    </div>
                  </div>
                  <!-- Email -->
                  <div class="col-12">
                    <label for="email" class="form-label">Email:</label>
                    <input type="email" class="form-control" value="{{user.email}}" disabled/>
                  </div>
                  <!-- Provinnce -->
                  <div class="col-sm-6">
                    <label for="province" class="form-label">Province:</label>
                    <input type="text" class="form-control" value="{{user_profile.province |capfirst}}" disabled/>
                  </div>
                  <!-- District -->
                  <div class="col-sm-6">
                    <label for="district" class="form-label">District:</label>
                    <input type="text" class="form-control" value="{{user_profile.district |capfirst}}" disabled/>
                  </div>
                  <!-- Sector -->
                  <div class="col-sm-6">
                    <label for="district" class="form-label">Sector:</label>
                    <input type="text" class="form-control" value="{{user_profile.sector |capfirst}}" disabled/>
                  </div>
                  <!-- Cell -->
                  <div class="col-sm-6">
                    <label for="district" class="form-label">Cell:</label>
                    <input type="text" class="form-control" value="{{user_profile.cell |capfirst}}" disabled/>
                  </div>
              </div>
             </form>
						<button type="button" class="btn btn-success mt-3" data-bs-toggle="modal"
							data-bs-target="#staticBackdrops">Update info</button>
						<!-- Modal form for updating admin Personal information -->
						<div class="modal fade" id="staticBackdrops" data-bs-backdrop="static" data-bs-keyboard="false"
							tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<h1 class="modal-title fs-5" id="staticBackdropLabel">UPDATE PERSONAL INFORMATION</h1>
										<button type="button" class="btn-close" data-bs-dismiss="modal"
											aria-label="Close"></button>
									</div>
									<form action="{%url 'admin_profile'%}" method="POST" enctype="multipart/form-data">
										{%csrf_token%}
										<div class="modal-body">
											{{user_form |crispy}}
                      {{user_profile_form |crispy}}
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"
												data-bs-dismiss="modal">Close</button>
											<button type="submit" class="btn btn-success">Save Changes</button>
										</div>
									</form>
								</div>
							</div>
						</div>
            </div>
					</div>

          <div class="col-md-1"></div>
          <div class="col-md-3 shado">
            <button type="button" class="btn btn-lg btn-primary position-relative mt-5">
              Notifications
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                {{notification_count}}+
                <span class="visually-hidden">unread messages</span>
              </span>
            </button>

            <hr class="shado">
            <ul class="list-group" style="padding: 10px; max-height: 530px; overflow-y:scroll;">
              {%for notification in notifications%}
              <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                  <div class="fw-bold">{{notification.name}}</div>
                  <small><i>{{notification.time |timesince}} ago</i></small> 
                </div>
                <a href="{%url 'delete_notification' notification.id%}" class="badge bg-danger rounded-pill"><i class="fa-solid fa-trash"></i></a>
              </li>
              {%endfor%}    
             
            </ul>
          </div>
				</section>

		  	</div>
       {%endif%}
      </div>
      
    </div>
   
  </body>
 <script src="{%static 'js/bootstrap.min.js'%}"></script>
 <script src="{%static 'js/bootstrap.js'%}"></script>
 <script src="{%static 'js/form-validation.js'%}"></script>

 <!-- This script is for designing image upload input -->
 <script>
    const imageUpload = document.querySelector('.image-upload');
    const imageInput = document.getElementById('file-input');
    const imagePreview = document.getElementById('image-preview');

    imageUpload.addEventListener('dragover', (e) => {
      e.preventDefault();
      imageUpload.classList.add('dragover');
    });

    imageUpload.addEventListener('dragleave', () => {
      imageUpload.classList.remove('dragover');
    });

    imageUpload.addEventListener('drop', (e) => {
      e.preventDefault();
      imageUpload.classList.remove('dragover');
      const file = e.dataTransfer.files[0];
      previewImage(file);
    });

    imageInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      previewImage(file);
    });

    function previewImage(file) {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onloadend = () => {
        imagePreview.src = reader.result;
      };
    }
 </script>

</html>
